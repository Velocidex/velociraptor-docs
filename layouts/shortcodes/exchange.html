
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js">
</script>

<div class="input-group">
  <input type="text" id="myInput" onkeyup="doSearch()" class="form-control" placeholder="Query Hub" aria-describedby="basic-addon2">
  <span class="input-group-addon" id="basic-addon2"><i class="fas fa-search"></i></span>
</div>
<br>

<!-- Single button -->
<div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Action <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a onclick="Linux()"href="#">Linux</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Separated link</a></li>
  </ul>
</div> 

<!-- Single button -->
<div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Action <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a onclick="Linux()"href="#">Linux</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Separated link</a></li>
  </ul>
</div> 

<!-- Single button -->
<div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Action <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a onclick="Linux()"href="#">Linux</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Separated link</a></li>
  </ul>
</div> 
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg right" data-toggle="modal" data-target="#myModal">
  Want to add Your Query
</button>

<!-- Modal -->
<div class="modal fade E" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog E" role="document">
    <div class="modal-content E">
      <div class="modal-header E">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title E" id="myModalLabel">Info about the Query Hub</h4>
      </div>
      <div class="modal-body E">
         The Query Hub
        <br>
        This hub is where you can find all the archives where we have stored data. 
        This data is to help all those that are in need.
        But saddly we can't discover everything thats where you come in.
        With your help we can complete the archives.
        <br>
        <br>
        <p style="color:white; font-style: italic;">The darkside is strong with you.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <br>
        <a href="https://github.com/scudette/velociraptor-docs/new/master/content/exchange/artifacts"
class="btn btn-primary btn-lg right">Add Your Own Query</a>
      </div>
    </div>
  </div>
</div>



<br>
<br>
<br>
<br>
<div class="search_results"></div>

<script>
let all_data = [];

$.ajax({
  url: "/exchange/data.json",
}).done(function( data ) {
  console.log(data);
  all_data = data;
  DrawResults(data);
});

function doSearch() {
  // Declare variables
  let input = document.getElementById('myInput');
  let filter = input.value.toUpperCase();

  let result = [];
  for(let i=0;i<all_data.length; i++) {
    let item = all_data[i];

    if (item.title.toUpperCase().includes(filter)) {
      result.push(item);
    }
  };
  console.log(result);
  DrawResults(result);
}

function DrawResults(data) {
  $(".search_results").empty();

  for(let i=0;i<data.length; i++) {
    let item = data[i];
    let template = $(`<div class="panel panel-default color">
  <div class="panel-heading color">
    <a class="title" href=""><h3 class="panel-title color " ></h3></a>
  </div>
  <div class="panel-body color">
<div class="border color">
		<div class="border color">
			<div class="idea-inner-text-main color">
				<br>
				<span class="user-name" href="">Submitted by <a class="user-name-link"></a>
        <img class="user-avatar inline">
        <p></p></span>
                    <p class="description "></p>
				<p class="idea-tag space">
        </p>
      </div>
    </div>
  </div>
</div>`);

    template.find(".title").append(item.title);
    template.find(".user-name-link").append(item.author);
    template.find(".description").append(item.description);
    template.find(".user-name-link").attr("href", item.author_link);
    template.find(".user-avatar").attr("src", item.author_avatar);
    template.find(".title").attr("href", item.link);

    console.log(item);
    for (let j=0; j<item.tags.length; j++) {
      let tag = item.tags[j];
      console.log(tag);
      template.find(".idea-tag").append(`<a class="space">&nbsp;<i class="linkcolour label label-success">` + tag + `</i></a>`);
    }
    let new_item = $(".search_results").append(template);
  }
};

function myFunction() {
  // Declare variables
  var input, filter, ul, li, a, i, txtValue;
  input = document.getElementById('myInput');
  filter = input.value.toUpperCase();
  ul = document.getElementById("myUL");
  li = ul.getElementsByTagName('li');
  // Loop through all list items, and hide those who don't match the search query
  for (i = 0; i < li.length; i++) {
    a = li[i].getElementsByTagName("a")[0];
    txtValue = a.textContent || a.innerText;
    
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      li[i].style.display = "";
    } else {
      li[i].style.display = "none";
    }
  }
}
function community() { //these are here to add quick buttons to add a phrase into the search engine
    ;
}
</script>





